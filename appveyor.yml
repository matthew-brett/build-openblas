# vim ft=yaml
# CI on Windows via appveyor

environment:
    global:
      MINGWPY_URL: https://8f55531b0432ac914da3-7f407ad05f03da00978ba0b8ec6c202f.ssl.cf2.rackcdn.com

    matrix:
      - PYTHON: "C:\\Python27"
        PYTHON_VERSION: "2.7.8"
        PYTHON_ARCH: "32"

      - PYTHON: "C:\\Python27-x64"
        PYTHON_VERSION: "2.7.8"
        PYTHON_ARCH: "64"

build_script:
  - cmd: git submodule update --init --recursive
  - set PATH=C:\msys64\usr\bin;%PATH%
  - pip install -i https://pypi.anaconda.org/carlkl/simple mingwpy
  - where gcc
  - gcc -v
  # Try compiling a test file
  - echo int main(int argc, char **argv) { exit(0); } > test.c
  - gcc test.c
  - cd OpenBLAS
  # Try compiling a test file again
  - gcc ..\test.c
